@startuml BankingArchitecture
title Banking Transaction System - High Level (MVP)

skinparam componentStyle rectangle
skinparam shadowing false
skinparam monochrome true

actor User as user

component "AccountSmokeTest / Main\n(entry point)" as entry
component "AccountService\n(business rules)" as svc

component "AccountRepository\n(data access)" as accRepo
component "TransactionRepository\n(data access)" as txRepo
database  "DynamoDB\nAccounts table" as accTable
database  "DynamoDB\nTransactions table" as txTable

note right of entry
  Reads AWS credentials from Run/Debug env vars:
  AWS_ACCESS_KEY_ID
  AWS_SECRET_ACCESS_KEY
  AWS_SESSION_TOKEN
  AWS_REGION
end note

user --> entry : run
entry --> svc  : call deposit()/withdraw()
svc  --> accRepo : get(id), put(account)
svc  --> txRepo  : put(transaction)
accRepo --> accTable : DynamoDbEnhancedClient (SDK v2)
txRepo  --> txTable  : DynamoDbEnhancedClient (SDK v2)

' Future (not in MVP code yet)
component "AuditLogRepository" as audit
audit ..> accTable : (future)
audit ..> txTable  : (future)

' Tests
component "JUnit 5 + Mockito\n(unit tests)" as tests
tests ..> svc : mock repos,\nverify behavior

@enduml